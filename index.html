<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>The Azure Mystery Mansion</title>

		<script src="http://olado.github.io/doT/doT.min.js"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
		<script src="dedalus.js"></script>
		<script src="dedalus-web.js"></script>

		<link rel="stylesheet" href="themes/mysterymansion/story.css" />
	</head>
	<body>
		<div id="story">
			<initscript> </initscript>

			<beforeEveryThing> </beforeEveryThing>

			<beforeEveryPageTurn> </beforeEveryPageTurn>

			<beforeEveryParagraphShown> </beforeEveryParagraphShown>

			<afterEveryThing> </afterEveryThing>

			<afterEveryPageTurn> </afterEveryPageTurn>

			<afterEveryParagraphShown> </afterEveryParagraphShown>

			<!-- Novel -->
			<title>Welcome to the Azure Mystery Mansion</title>

			<!-- Objects -->
			<obj id="dummyObject" inventoryName="A key">
				<action id="Examine">
					It's old. And rusty. And probably fits into a door somewhere.
				</action>

				<action id="Get">
					<when>!story.isInInventory('dummyObject')</when>
					As you grab the key, it falls to pieces!
					{{ story.putInInventory('dummyObject'); }}
				</action>
			</obj>

			<!-- Pages -->
			<page id="intro">
				You are about to experience a truly unusual place...
			</page>

			<page id="dummyPage" class="first">
				You are in an empty yard except for an <show paragraph="dummyParagraph">old rusty car</show>.

				<p>
					Walking up the steps, there is a <interact with="dummyObject">key</interact> lying under the
					doormat.
				</p>

				<p>Looking around with more attention, you notice <turn to="otherPage">another page</turn></p>

				<paragraph id="dummyParagraph">
					Yep, you clicked it!
				</paragraph>
			</page>

			<page id="otherPage">
				Plot twist! The story ends abruptly.
				{{ story.endGame(); }}
			</page>
		</div>

		<div id="wrapper">
			<div id="title"></div>

			<div id="inventoryHostWrapper">
				<h2>Inventory</h2>
				<div id="inventoryHost"></div>
			</div>

			<div id="host"></div>
		</div>

		<div id="interactionHost"></div>

		<div id="undoStageHost"></div>

		<div id="footer">
			<a id="undoHost" href="#">Undo</a> &bull; <a id="saveHost" href="#">Save</a> &bull;
			<a id="restoreHost" href="#">Restore</a> &bull; <a id="reseteHost" href="#">Reset</a>
		</div>

		<script>
			$(function() {
				new DedalusWeb({
					domSource: $('#story'),
					domTarget: $('#host'),
					titleTarget: $('#title'),
					inventoryTarget: $('#inventoryHost'),
					interactionTarget: $('#interactionHost'),
					undoTarget: $('#undoHost'),
					undoStageTarget: $('#undoStageHost'),
					saveTarget: $('#saveHost'),
					restoreTarget: $('#restoreHost'),
					resetTarget: $('#reseteHost'),
				});
			});
		</script>
	</body>
</html>
